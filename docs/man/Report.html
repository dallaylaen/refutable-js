<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Report</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Report</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Report<span class="signature">()</span><span class="type-signature"></span></h2>
        
            <div class="class-description">The core of the refute library, the report object contains info
about passing and failing conditions.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Report"><span class="type-signature"></span>new Report<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    No constructor arguments supported.
 Contracts may need to be set up inside callbacks _after_ creation,
 hence this convention.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line26">line 26</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".explain"><span class="type-signature">(static) </span>explain<span class="signature">(target, depth)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Stringiry objects recursively with limited depth
 and circular reference tracking.
 Generally JSON.stringify is used as reference:
 strings are escaped and double-quoted; numbers, boolean, and nulls are
 stringified "as is"; objects and arrays are descended into.
 The differences follow:
 undefined is reported as '<undef>'.
 Objects that have constructors are prefixed with class names.
 Object and array content is abbreviated as "..." and "Circular"
 in case of depth exhaustion and circular reference, respectively.
 Functions are naively stringified.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>target</code></td>
            

            <td class="type">
            
                
<span class="param-type">Any</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Object to serialize.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>depth</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            
                <td class="default">
                
                    3
                
                </td>
            

            <td class="description last">Depth limit.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_util.js.html">refute/util.js</a>, <a href="refute_util.js.html#line49">line 49</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="async"><span class="type-signature"></span>async<span class="signature">(timeout, contract)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Run a contract asynchronously with timeout.
 Returns a promise that will resolve when the contract finishes,
 passing along the contract object to then().
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last">Promise will reject if timeout is reached.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>contract</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#Contract">Contract</a></span>


            
            </td>

            

            

            <td class="description last">A function to pass Report object to.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line103">line 103</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getCount"><span class="type-signature"></span>getCount<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>
    

    



<div class="description">
    Number of checks performed.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line233">line 233</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getDetails"><span class="type-signature"></span>getDetails<span class="signature">(n)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Returns detailed report on a specific check
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last">check number, must be <= getCount()</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line442">line 442</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getDone"><span class="type-signature"></span>getDone<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line204">line 204</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getError"><span class="type-signature"></span>getError<span class="signature">(n<span class="signature-attributes">opt</span>, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Error|undefined}</span></h4>
    

    



<div class="description">
    Convert report to an AssertionError (if available) or just Error.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Number of check to convert to exception.
 Current error format is TAP, this may change in the future.
 If 0 or unspecified, convert the whole report.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pass</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">If false (the default), return nothing
 if the report is passing.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line480">line 480</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Error</span>
|

<span class="param-type">undefined</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getFailCount"><span class="type-signature"></span>getFailCount<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>
    

    



<div class="description">
    Number of checks failing.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line250">line 250</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getGhost"><span class="type-signature"></span>getGhost<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Return a string of failing/passing checks.
  This may be useful for validating custom conditions.
  Consecutive passing checka are represented by numbers.
  A capital letter in the string represents failure.
  See also <a href="Report.html#getText">getText()</a>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line274">line 274</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// 10 passing checks
  "r(10)"
  </code></pre>

    <pre class="prettyprint"><code>// 10 checks with 1 failure in the middle
  "r(5,N,4)"
  </code></pre>

    <pre class="prettyprint"><code>// 10 checks including a nested contract
  "r(3,r(1,N),6)"
  </code></pre>

    <pre class="prettyprint"><code>// no checks were run - auto-fail
  "r(Z)"</code></pre>



        
            

    

    
    <h4 class="name" id="getPass"><span class="type-signature"></span>getPass<span class="signature">(n)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Without argument returns whether the contract was fulfilled.
  As a special case, if no checks were run and the contract is finished,
  returns false, as in "someone must have forgotten to execute
  planned checks. Use pass() if no checks are planned.

  If a parameter is given, return the status of n-th check instead.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line223">line 223</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getTap"><span class="type-signature"></span>getTap<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Returns report stringified as TAP format
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line394">line 394</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getText"><span class="type-signature"></span>getText<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Returns serialized diff-like report with nesting and indentation.
 Passing conditions are merked with numbers, failing are prefixed
 with a bang (!).

 See also <a href="Report.html#getGhost">getGhost()</a>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line322">line 322</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// no checks run
 const r = new Report();
 r.getText();
 r(
 )
 </code></pre>

    <pre class="prettyprint"><code>// pass
 const r = new Report();
 r.pass('foo bared');
 r.getText();
 r(
     1. foo bared
 )
 </code></pre>

    <pre class="prettyprint"><code>// fail
 const r = new Report();
 r.equal('war', 'peace');
 r.getText();
 r(
     !1.
     ^ Condition equal failed at &lt;file>:&lt;line>:&lt;char>
     - war
     + peace
 )</code></pre>



        
            

    

    
    <h4 class="name" id="info"><span class="type-signature"></span>info<span class="signature">(&hellip;message)</span><span class="type-signature"> &rarr; {<a href="Report.html">Report</a>}</span></h4>
    

    



<div class="description">
    Append an informational message to the report.
Non-string values will be stringified via explain().
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">Any</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line182">line 182</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    chainable
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Report.html">Report</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="last"><span class="type-signature"></span>last<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Whether the last check was a success.
 This is just a shortcut for foo.getDetails(foo.getCount).pass
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line242">line 242</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="onDone"><span class="type-signature"></span>onDone<span class="signature">(callback)</span><span class="type-signature"> &rarr; {<a href="Report.html">Report</a>}</span></h4>
    

    



<div class="description">
    Execute code when contract execution finishes.
  Report object cannot be modified at this point,
  and no additional checks my be present.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">first argument is report in question</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line59">line 59</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    this (chainable)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Report.html">Report</a></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>report.onDone( r => { if (!r.getPass()) console.log(r.getText()) } )</code></pre>



        
            

    

    
    <h4 class="name" id="run"><span class="type-signature"></span>run<span class="signature">(contract)</span><span class="type-signature"> &rarr; {<a href="Report.html">Report</a>}</span></h4>
    

    



<div class="description">
    apply given function to a Report object.
  Multiple contracts can be chained over the same object.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>contract</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#Contract">Contract</a></span>


            
            </td>

            

            

            <td class="description last">The function to execute.
  Additional parameters may be _prepended_ to contract
  and will be passed to it _after_ the Report object in question.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line85">line 85</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    this (chainable)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Report.html">Report</a></span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// The basic usage
  new Report().run( ok => ok.equal( 'war', 'peace', '1984' ) );
  </code></pre>

    <pre class="prettyprint"><code>// Passing additional args
  // The contract body is the last argument.
  new Report().run( { v: 4.2, colors: [ 'blue' ] }, (r, arg) => {
      r.type( arg, 'object' );
      r.type( arg.v, 'number' );
      r.numCmp( arg.v, '>=', 3.14 );
      r.type( arg.colors, 'array' );
  });</code></pre>



        
            

    

    
    <h4 class="name" id="toJSON"><span class="type-signature"></span>toJSON<span class="signature">()</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    returns a plain serializable object
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="refute_report.js.html">refute/report.js</a>, <a href="refute_report.js.html#line367">line 367</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="conditions.html">conditions</a></li><li><a href="refute.html">refute</a></li><li><a href="utilities.html">utilities</a></li></ul><h3>Classes</h3><ul><li><a href="Report.html">Report</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sun Dec 05 2021 09:03:16 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>